<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CS180 – Project 1 | Images of the Russian Empire</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@300;400;600;700&display=swap" rel="stylesheet" />

  <!-- shared site styles -->
  <link rel="stylesheet" href="../styles.css" />
</head>

<body class="top-title">
  <canvas id="sky" aria-hidden="true"></canvas>

  <!-- proj5/proj3-style fixed header -->
  <header class="site-header">
    <div class="content">
      <nav class="top-nav" aria-label="Project navigation">
        <a href="../index.html" class="nav-logo">Home</a>
      </nav>
    </div>
  </header>

  <!-- hero -->
  <div class="content big-title">
    <h1 class="title">Images of the Russian Empire</h1>
  </div>


  <!-- =============================== Single-scale JPG plates (media/single_rgb) =============================== -->
  <section id="single_rgb" class="content gold-glass iteration-belt iteration-belt--two-rows"
    aria-label="Single-scale JPG channel plates">

    <h2 class="section-heading">Single-Scale Plates</h2>



    <div class="iteration-belt__intro">
      <p>
        Single-scale plate alignment can be treated as an inference from multiple appearances to a single scene
        geometry. A
        Prokudin–Gorskii scan contains three grayscale exposures of the same subject, separated by a spectral filter and
        a
        small lapse of time; the task is to recover the spatial correspondence that makes these exposures comparable
        within
        one coordinate frame. For the low-resolution JPEG plates, the specification’s simplifying assumption is that
        this
        correspondence is adequately modeled by a two-dimensional translation.
      </p>
    </div>

    <div class="viz-pair" style="--viz-pair-max: 36rem;" role="group" aria-label="Final mosaic comparison (Catalina)">
      <div class="viz-pair__panel">
        <div class="viz-pair__title">Monastery</div>
        <img class="viz-pair__image" src="media/1_single_rgb/monastery.jpg" alt="Monastery: blue band (B)">
      </div>

      <div class="viz-pair__panel">
        <div class="viz-pair__title">tobolsk</div>
        <img class="viz-pair__image" src="media/1_single_rgb/tobolsk.jpg" alt="Monastery: red band (R)">
      </div>
    </div>


     <div class="iteration-belt__intro">
      <p>
        The procedure begins by splitting the scan into three equal bands in B–G–R order and selecting the blue band as
        the
        reference. Two displacement vectors are then estimated: one that maps the green band into the blue frame and one
        that
        maps the red band into the same frame. Each displacement is chosen by exhaustively testing a bounded window of
        integer
        shifts and scoring the shifted band against the reference with a simple matching metric such as L2 distance or
        normalized cross-correlation, computed on interior pixels so that colored borders and scan artifacts do not
        dominate
        the comparison.
      </p>
    </div>

    <figure style="margin-top: 1.25rem;">
    <div class="viz-pair viz-pair--three" role="group" aria-label="Monastery: raw B, G, R bands">
      <div class="viz-pair__panel">
        <div class="viz-pair__title">B</div>
        <img class="viz-pair__image" src="media/single_rgb/monastery_B.png" alt="Monastery: blue band (B)">
      </div>
      <div class="viz-pair__panel">
        <div class="viz-pair__title">G</div>
        <img class="viz-pair__image" src="media/single_rgb/monastery_G.png" alt="Monastery: green band (G)">
      </div>
      <div class="viz-pair__panel">
        <div class="viz-pair__title">R</div>
        <img class="viz-pair__image" src="media/single_rgb/monastery_R.png" alt="Monastery: red band (R)">
      </div>
    </div>
    <figcaption class="iteration-belt__caption">
      Monastery — three raw exposures. The alignment step estimates the translations that place the G and R bands
      into the B coordinate frame before stacking.
    </figcaption>
  </figure>

    <div class="iteration-belt__header">
      <button type="button" class="iteration-belt__toggle" aria-pressed="false">Pause</button>
    </div>

    <div class="iteration-belt__viewport">
      <div class="iteration-belt__row" style="--belt-item-width: 58rem;">
        <h3 class="iteration-belt__row-title">Other plates: raw triptychs</h3>
        <div class="iteration-belt__track">

          <figure class="iteration-belt__item">
            <div class="static-panel--row" role="group" aria-label="Church: raw B, G, R bands">
              <div class="static-panel__item">
                <img class="static-panel__image" src="media/single_rgb/church_B.png" alt="Church: blue band (B)">
                <div class="static-panel__caption">B</div>
              </div>
              <div class="static-panel__item">
                <img class="static-panel__image" src="media/single_rgb/church_G.png" alt="Church: green band (G)">
                <div class="static-panel__caption">G</div>
              </div>
              <div class="static-panel__item">
                <img class="static-panel__image" src="media/single_rgb/church_R.png" alt="Church: red band (R)">
                <div class="static-panel__caption">R</div>
              </div>
            </div>
            <figcaption class="iteration-belt__caption">Church — raw B/G/R before any translation correction.
            </figcaption>
          </figure>

          <figure class="iteration-belt__item">
            <div class="static-panel--row" role="group" aria-label="Emir: raw B, G, R bands">
              <div class="static-panel__item">
                <img class="static-panel__image" src="media/single_rgb/emir_B.png" alt="Emir: blue band (B)">
                <div class="static-panel__caption">B</div>
              </div>
              <div class="static-panel__item">
                <img class="static-panel__image" src="media/single_rgb/emir_G.png" alt="Emir: green band (G)">
                <div class="static-panel__caption">G</div>
              </div>
              <div class="static-panel__item">
                <img class="static-panel__image" src="media/single_rgb/emir_R.png" alt="Emir: red band (R)">
                <div class="static-panel__caption">R</div>
              </div>
            </div>
            <figcaption class="iteration-belt__caption">
              Emir — strong exposure differences motivate similarity on structure (e.g., edges) rather than raw
              intensity.
            </figcaption>
          </figure>

          <figure class="iteration-belt__item">
            <div class="static-panel--row" role="group" aria-label="Harvesters: raw B, G, R bands">
              <div class="static-panel__item">
                <img class="static-panel__image" src="media/single_rgb/harvesters_B.png"
                  alt="Harvesters: blue band (B)">
                <div class="static-panel__caption">B</div>
              </div>
              <div class="static-panel__item">
                <img class="static-panel__image" src="media/single_rgb/harvesters_G.png"
                  alt="Harvesters: green band (G)">
                <div class="static-panel__caption">G</div>
              </div>
              <div class="static-panel__item">
                <img class="static-panel__image" src="media/single_rgb/harvesters_R.png" alt="Harvesters: red band (R)">
                <div class="static-panel__caption">R</div>
              </div>
            </div>
            <figcaption class="iteration-belt__caption">
              Harvesters — alignment is judged by the coincidence of repeated edges and contours across bands.
            </figcaption>
          </figure>

          <figure class="iteration-belt__item">
            <div class="static-panel--row" role="group" aria-label="Self portrait: raw B, G, R bands">
              <div class="static-panel__item">
                <img class="static-panel__image" src="media/single_rgb/self_portrait_B.png"
                  alt="Self portrait: blue band (B)">
                <div class="static-panel__caption">B</div>
              </div>
              <div class="static-panel__item">
                <img class="static-panel__image" src="media/single_rgb/self_portrait_G.png"
                  alt="Self portrait: green band (G)">
                <div class="static-panel__caption">G</div>
              </div>
              <div class="static-panel__item">
                <img class="static-panel__image" src="media/single_rgb/self_portrait_R.png"
                  alt="Self portrait: red band (R)">
                <div class="static-panel__caption">R</div>
              </div>
            </div>
            <figcaption class="iteration-belt__caption">
              Self portrait — fine facial edges provide strong constraints on the translation.
            </figcaption>
          </figure>

        </div>
      </div>
    </div>

    <div class="iteration-belt__outro">
      <p>
        The underlying issue is not peculiar to historical colorization; it is the general problem of registering
        multiple
        measurements to a shared coordinate system. When channels are captured simultaneously in a fixed geometry, this
        alignment step is largely absent; when bands or modalities are acquired separately, registration becomes
        necessary.
        Astronomy and remote sensing often stack separately captured spectral bands into false-color composites,
        microscopy
        aligns multi-stain or multi-fluorescence channels, medical imaging registers multi-sequence scans (and even
        cross-modality pairs), and industrial inspection aligns visible, infrared, and depth sensors to support
        measurement
        and control. The single-scale method is the simplest instance of this broader engineering practice: estimate the
        transformation that best preserves shared structure while discounting unreliable borders and channel-dependent
        intensity shifts.
      </p>

    </div>
  </section>

<!-- =============================== Multi-scale pyramid alignment (media/2_multi_scale/ncc) =============================== -->
<section id="multi_scale" class="content gold-glass iteration-belt"
  aria-label="Multi-scale pyramid alignment results (NCC)" style="--belt-item-width: 36rem;">

  <h2 class="section-heading">Multi-Scale Pyramid Alignment</h2>

  <div class="iteration-belt__intro">
    <p>
      Pyramid alignment can be characterized as a computational re-ordering of the same inferential task posed by the
      single-scale method. The transformation model remains a two-dimensional translation, and the objective remains a
      maximization of agreement between two channel images; what changes is the manner in which evidence is gathered.
      Rather than searching for a large displacement directly on the full-resolution plate, the image is represented at
      multiple scales, and the displacement is recovered by successive approximation from coarse to fine.
    </p>
    <p>
      The crucial fact is that downsampling contracts displacement. A translation that is hundreds of pixels at full
      resolution becomes a modest shift on the coarsest level, where exhaustive search is cheap because both the image
      area and the effective search radius are small. That coarse estimate is then treated as a provisional hypothesis:
      it is scaled to the next resolution and corrected by a local refinement search. Repeating this update across the
      pyramid yields a final shift that is accurate at the finest scale while avoiding the quadratic explosion in the
      number of candidates that would occur if a single large window were searched on the original plate.
    </p>
  </div>



  <div class="code-snippets" aria-label="Timing and offsets">
  <div class="code-snippets__title">Logged timing</div>

  <details class="code-snippet" open>
    <summary>Runtime summary</summary>
    <div class="code-snippet__body">
      <pre class="code-block"><code>mean 17.84s (std 1.05s), range 16.33–19.80s
fastest: self_portrait (16.33s)
slowest: indoor_chruch (19.80s)</code></pre>
    </div>
  </details>

  <details class="code-snippet" open>
    <summary>Offset scale</summary>
    <div class="code-snippet__body">
      <pre class="code-block"><code>max |dx|:  G 29px  R 40px
max |dy|:  G 80px  R 177px</code></pre>
    </div>
  </details>
</div>


  <!-- 2) Raw vs enhanced comparisons -->
  <div class="iteration-belt__header" style="margin-top: 1.5rem;">
    <h3 class="iteration-belt__title">Photometric correction (left: raw aligned composite, right: corrected)</h3>
  </div>

  <div class="viz-pair" style="--viz-pair-max: 58rem;" role="group" aria-label="Raw vs enhanced comparisons (set 1)">
    <div class="viz-pair__panel">
      <div class="viz-pair__title">Indoor Church</div>
      <img class="viz-pair__image" src="media/2_multi_scale/ncc/indoor_chruch_before_after.png"
        alt="Indoor Church: left raw aligned composite, right corrected composite" loading="lazy">
      <div class="iteration-belt__caption">
        Left: raw RGB stack after alignment. Right: autocontrast + gray-world white balance + autocrop.
      </div>
    </div>

    <div class="viz-pair__panel">
      <div class="viz-pair__title">Church</div>
      <img class="viz-pair__image" src="media/2_multi_scale/ncc/church_before_after.png"
        alt="Church: left raw aligned composite, right corrected composite" loading="lazy">
      <div class="iteration-belt__caption">
        Left: raw RGB stack after alignment. Right: autocontrast + gray-world white balance + autocrop.
      </div>
    </div>
  </div>

  <div class="viz-pair" style="--viz-pair-max: 58rem;" role="group" aria-label="Raw vs enhanced comparisons (set 2)">
    <div class="viz-pair__panel">
      <div class="viz-pair__title">Emir</div>
      <img class="viz-pair__image" src="media/2_multi_scale/ncc/emir_before_after.png"
        alt="Emir: left raw aligned composite, right corrected composite" loading="lazy">
      <div class="iteration-belt__caption">
        Left: raw RGB stack after alignment. Right: autocontrast + gray-world white balance + autocrop.
      </div>
    </div>

    <div class="viz-pair__panel">
      <div class="viz-pair__title">Village</div>
      <img class="viz-pair__image" src="media/2_multi_scale/ncc/village_before_after.png"
        alt="Village: left raw aligned composite, right corrected composite" loading="lazy">
      <div class="iteration-belt__caption">
        Left: raw RGB stack after alignment. Right: autocontrast + gray-world white balance + autocrop.
      </div>
    </div>
  </div>

  <!-- 3) Full results -->
  <div class="iteration-belt__header" style="margin-top: 1.5rem;">
    <h3 class="iteration-belt__title">Full-resolution reconstructions (NCC + pyramid + enhancement)</h3>
    <button type="button" class="iteration-belt__toggle" aria-pressed="false">Pause</button>
  </div>

  <div class="iteration-belt__viewport">
    <div class="iteration-belt__track">

      <figure class="iteration-belt__item">
        <img class="iteration-belt__image" src="media/2_multi_scale/ncc/icon_rgb.jpg" alt="Icon — reconstructed RGB" loading="lazy">
        <figcaption class="iteration-belt__caption">Icon — G(dx,dy)=(17, 42), R(dx,dy)=(23, 90), 17.08s.</figcaption>
      </figure>

      <figure class="iteration-belt__item">
        <img class="iteration-belt__image" src="media/2_multi_scale/ncc/italil_rgb.jpg" alt="Italil — reconstructed RGB" loading="lazy">
        <figcaption class="iteration-belt__caption">Italil — G(dx,dy)=(22, 38), R(dx,dy)=(36, 77), 17.20s.</figcaption>
      </figure>

      <figure class="iteration-belt__item">
        <img class="iteration-belt__image" src="media/2_multi_scale/ncc/melons_rgb.jpg" alt="Melons — reconstructed RGB" loading="lazy">
        <figcaption class="iteration-belt__caption">Melons — G(dx,dy)=(10, 80), R(dx,dy)=(13, 177), 17.64s.</figcaption>
      </figure>

      <figure class="iteration-belt__item">
        <img class="iteration-belt__image" src="media/2_multi_scale/ncc/lugano_rgb.jpg" alt="Lugano — reconstructed RGB" loading="lazy">
        <figcaption class="iteration-belt__caption">Lugano — G(dx,dy)=(-17, 41), R(dx,dy)=(-29, 92), 18.07s.</figcaption>
      </figure>

      <figure class="iteration-belt__item">
        <img class="iteration-belt__image" src="media/2_multi_scale/ncc/church_rgb.jpg" alt="Church — reconstructed RGB" loading="lazy">
        <figcaption class="iteration-belt__caption">Church — G(dx,dy)=(4, 25), R(dx,dy)=(-4, 58), 18.23s.</figcaption>
      </figure>

      <figure class="iteration-belt__item">
        <img class="iteration-belt__image" src="media/2_multi_scale/ncc/lastochikino_rgb.jpg" alt="Lastochikino — reconstructed RGB" loading="lazy">
        <figcaption class="iteration-belt__caption">Lastochikino — G(dx,dy)=(-2, -3), R(dx,dy)=(-8, 76), 17.58s.</figcaption>
      </figure>

      <figure class="iteration-belt__item">
        <img class="iteration-belt__image" src="media/2_multi_scale/ncc/emir_rgb.jpg" alt="Emir — reconstructed RGB" loading="lazy">
        <figcaption class="iteration-belt__caption">Emir — G(dx,dy)=(23, 49), R(dx,dy)=(40, 107), 17.58s.</figcaption>
      </figure>

      <figure class="iteration-belt__item">
        <img class="iteration-belt__image" src="media/2_multi_scale/ncc/harvesters_rgb.jpg" alt="Harvesters — reconstructed RGB" loading="lazy">
        <figcaption class="iteration-belt__caption">Harvesters — G(dx,dy)=(17, 60), R(dx,dy)=(14, 124), 18.01s.</figcaption>
      </figure>

      <figure class="iteration-belt__item">
        <img class="iteration-belt__image" src="media/2_multi_scale/ncc/siren_rgb.jpg" alt="Siren — reconstructed RGB" loading="lazy">
        <figcaption class="iteration-belt__caption">Siren — G(dx,dy)=(-6, 49), R(dx,dy)=(-24, 96), 18.70s.</figcaption>
      </figure>

      <figure class="iteration-belt__item">
        <img class="iteration-belt__image" src="media/2_multi_scale/ncc/three_generations_rgb.jpg" alt="Three Generations — reconstructed RGB" loading="lazy">
        <figcaption class="iteration-belt__caption">Three Generations — G(dx,dy)=(12, 54), R(dx,dy)=(9, 111), 18.40s.</figcaption>
      </figure>

      <figure class="iteration-belt__item">
        <img class="iteration-belt__image" src="media/2_multi_scale/ncc/self_portrait_rgb.jpg" alt="Self Portrait — reconstructed RGB" loading="lazy">
        <figcaption class="iteration-belt__caption">Self Portrait — G(dx,dy)=(29, 78), R(dx,dy)=(37, 176), 16.33s.</figcaption>
      </figure>

      <figure class="iteration-belt__item">
        <img class="iteration-belt__image" src="media/2_multi_scale/ncc/camel_rgb.jpg" alt="Camel — reconstructed RGB" loading="lazy">
        <figcaption class="iteration-belt__caption">Camel — G(dx,dy)=(-4, 47), R(dx,dy)=(-20, 97), 16.74s.</figcaption>
      </figure>

      <figure class="iteration-belt__item">
        <img class="iteration-belt__image" src="media/2_multi_scale/ncc/castle_church_rgb.jpg" alt="Castle Church — reconstructed RGB" loading="lazy">
        <figcaption class="iteration-belt__caption">Castle Church — G(dx,dy)=(13, 43), R(dx,dy)=(22, 109), 16.98s.</figcaption>
      </figure>

      <figure class="iteration-belt__item">
        <img class="iteration-belt__image" src="media/2_multi_scale/ncc/indoor_chruch_rgb.jpg" alt="Indoor Chruch — reconstructed RGB" loading="lazy">
        <figcaption class="iteration-belt__caption">Indoor Chruch — G(dx,dy)=(3, 50), R(dx,dy)=(-5, 108), 19.80s.</figcaption>
      </figure>

      <figure class="iteration-belt__item">
        <img class="iteration-belt__image" src="media/2_multi_scale/ncc/village_rgb.jpg" alt="Village — reconstructed RGB" loading="lazy">
        <figcaption class="iteration-belt__caption">Village — G(dx,dy)=(6, 50), R(dx,dy)=(13, 123), 18.70s.</figcaption>
      </figure>

    </div>
  </div>

  <!-- 4) Findings -->
  <div class="iteration-belt__outro">
    <p>
      The runtime profile is governed by the pyramid schedule rather than by the magnitude of the final displacement.
      Each level evaluates a fixed local search window (a coarse window at the smallest scale, then small refinement
      windows thereafter), so the work remains bounded while still recovering shifts that are large at full resolution.
    </p>
    <p>
      The raw outputs preserve the recovered geometry but can exhibit strong global channel imbalance due to unequal
      exposures across bands. Gray-world white balance reduces this bias by scaling channels toward a common mean, while
      autocontrast expands dynamic range; both operations act on appearance after alignment and therefore do not alter the
      estimated offsets.
    </p>
  </div>
</section>



  <!-- script that drives sky + belt pause behavior (same as your other projects) -->
  <script src="../script.js" defer></script>
</body>

</html>