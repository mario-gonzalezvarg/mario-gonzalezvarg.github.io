/* ============================
   Project 4: PE tabs + panels
   ============================ */

/* tab container + hidden radios */
.pe-tabs {
  position: relative;
  display: grid;
  gap: 12px;
  justify-items: center;
  margin-top: 10px;
}

.pe-tabs input[type="radio"] {
  position: absolute;
  bottom: 0;
  left: 0;
  inline-size: 1px;
  block-size: 1px;
  overflow: hidden;
  clip: rect(0 0 0 0);
  clip-path: inset(50%);
  white-space: nowrap;
}

/* tab strip */
.pe-tabbar {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
  justify-content: center;
}

.pe-tabbar label {
  padding: 6px 10px;
  font-size: 14px;
  cursor: pointer;
  user-select: none;
  border: 1px solid var(--line);
  border-radius: 999px;
  background: var(--panel);
  transition:
    transform 0.12s ease,
    border-color 0.12s ease,
    background 0.12s ease,
    color 0.12s ease;
}

.pe-tabbar label:hover {
  transform: translateY(-1px);
}

/* highlighted (checked) tabs */
#L1:checked~.pe-tabbar label[for="L1"],
#L4:checked~.pe-tabbar label[for="L4"],
#L8:checked~.pe-tabbar label[for="L8"],
#L12:checked~.pe-tabbar label[for="L12"],
#L16:checked~.pe-tabbar label[for="L16"],
#L24:checked~.pe-tabbar label[for="L24"],
#W64:checked~.pe-tabbar label[for="W64"],
#W256:checked~.pe-tabbar label[for="W256"],
#RFINAL:checked~.pe-tabbar label[for="RFINAL"],
#S5k:checked~.pe-tabbar label[for="S5k"],
#S10k:checked~.pe-tabbar label[for="S10k"] {
  border-color: var(--accent);
  background: linear-gradient(180deg, #f6e9bf, #e8d79d);
  color: #1a2133;
}

/* ============================
   PE panels & cards
   ============================ */

.graph-belt img {
  width: clamp(120px, 16vw, 240px);
  border-radius: 10px;
  box-shadow: 0 10px 26px rgba(0, 0, 0, .35);
}

.pe-panels {
  width: min(92vw, 1460px);
}

.pe-panels .panel {
  display: none;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: clamp(10px, 1.6vw, 16px);
}

.pe-card {
  margin: 0;
  background: var(--panel);
  border: 1px solid var(--line);
  border-radius: 12px;
  overflow: hidden;
  box-shadow: var(--shadow);
}

.pe-card img {
  width: 100%;
  height: auto;
  object-fit: contain;
  aspect-ratio: 1;
}

.pe-card figcaption {
  padding: 8px 10px;
  font-size: 0.92rem;
  color: var(--muted);
  text-align: center;
}

/* which panel is visible? */
#L1:checked~.pe-panels [data-l="L1"],
#L4:checked~.pe-panels [data-l="L4"],
#L8:checked~.pe-panels [data-l="L8"],
#L12:checked~.pe-panels [data-l="L12"],
#L16:checked~.pe-panels [data-l="L16"],
#L24:checked~.pe-panels [data-l="L24"] { display: grid; }

#W64:checked~.pe-panels [data-w="W64"],
#W256:checked~.pe-panels [data-w="W256"] { display: grid; }

#S5k:checked~.pe-panels [data-s="S5k"],
#S10k:checked~.pe-panels [data-s="S10k"] { display: grid; }

#RFINAL:checked~.pe-panels [data-r="RFINAL"] { display: grid; }

@media (max-width: 900px) {
  .pe-panels .panel { grid-template-columns: 1fr 1fr; }
}
@media (max-width: 620px) {
  .pe-panels .panel { grid-template-columns: 1fr; }
}

/* belt inside a panel spans full width */
.pe-panels .panel .graph-belt {
  grid-column: 1 / -1;
  margin-top: clamp(8px, 1.2vw, 14px);
}

/* ============================
   Specialized always-on panel groups
   ============================ */

.pe-panels.pe-panels-final {
  width: min(92vw, 1460px);
  margin: 1.5rem auto;
}
.pe-panels.pe-panels-final .panel {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: clamp(10px, 1.6vw, 16px);
  justify-items: center;
}

.pe-panels.pe-lego {
  width: min(92vw, 1460px);
  margin: 2rem auto;
}
.pe-panels.pe-lego .panel { display: grid; }

.pe-panels.pe-rays {
  width: min(92vw, 1460px);
  margin: 2rem auto;
}
.pe-panels.pe-rays .panel {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: clamp(10px, 1.6vw, 16px);
}

.pe-panels.pe-mydata {
  width: min(92vw, 1460px);
  margin: 2rem auto;
}
.pe-panels.pe-mydata .graph-belt .belt + .belt { margin-top: 0.75rem; }

/* ============================
   Graph belts (infinite conveyor)
   ============================ */

.graph-belt { overflow: hidden; }

.graph-belt .belt {
  display: flex;
  gap: clamp(12px, 1.8vw, 10px);
  width: max-content;
  will-change: transform;
  transform: translate3d(0, 0, 0);
  animation: belt-scroll 90s linear infinite;
}

@media (hover: hover) and (pointer: fine) {
  .graph-belt:hover .belt { animation-play-state: paused; }
}

.graph-belt .belt + .belt { margin-top: 0.75rem; }

.graph-belt .belt-frame {
  display: flex;
  flex-direction: column;
  align-items: center;
  min-width: clamp(120px, 16vw, 260px);
}

.graph-belt .belt-frame img {
  width: 100%;
  border-radius: 10px;
  box-shadow: 0 10px 26px rgba(0, 0, 0, .35);
}

.graph-belt .belt-frame figcaption {
  margin-top: 4px;
  font-size: 0.75rem;
  color: var(--muted);
  text-align: center;
}

#varying_width .graph-belt .belt-frame { width: clamp(120px, 16vw, 640px); }
#final_result .graph-belt .belt-frame { width: clamp(120px, 16vw, 640px); }

#varying_width .graph-belt .belt { gap: clamp(4px, 0.8vw, 6px); }
#max_encoding .graph-belt .belt { gap: 6px; }

@keyframes belt-scroll {
  from { transform: translate3d(0, 0, 0); }
  to   { transform: translate3d(-20%, 0, 0); }
}
