:root{
  --bg:#04060d; --bg-2:#070b16; --ink:#eef1f6; --muted:#b9c1d1; --line:#182032;
  --panel:rgba(12,16,28,.55); --accent:#f1deaa;
  --space:clamp(16px,2.2vw,28px); --radius:14px; --shadow:0 12px 30px rgba(0,0,0,.35);
}
*{box-sizing:border-box}
html{ scrollbar-gutter: stable both-edges; }           /* avoid layout jump on scrollbars */
html:focus-within{scroll-behavior:smooth}
body{
  margin:0;color:var(--ink);
  background:
    radial-gradient(1200px 800px at 15% 10%, #0e1730 10%, rgba(16,26,51,0) 60%),
    radial-gradient(1000px 800px at 80% 15%, #12204a 8%, rgba(23,34,63,0) 58%),
    linear-gradient(var(--bg) 0%, var(--bg-2) 60%, #02040a 100%);
  font:16px/1.5 Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
  -webkit-font-smoothing:antialiased;
}
.serif{font-family:"Cormorant Garamond", Georgia, "Times New Roman", serif}
img{max-width:100%;height:auto;display:block}
a{color:inherit;text-decoration:none}
.muted{color:var(--muted)} .small{font-size:13px}

/* Canvas backdrop stays behind content, above body bg */
#sky { position: fixed; inset: 0; width: 100vw; height: 100vh; z-index: 0; pointer-events: none; }
header, main, footer { position: relative; z-index: 1; }

/* Accessibility */
.skip{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden}
.skip:focus{left:12px;top:12px;background:#000;color:#fff;padding:8px 10px;border-radius:8px}

/* Header */
.progress{position:absolute; inset:0 auto auto 0; height:3px; width:100%; background:transparent; overflow:hidden}
.progress .bar{display:block;height:100%;width:0;background:linear-gradient(90deg,#fff,var(--accent));transform-origin:left}

.site-header{
  position:sticky; top:0; z-index:40; display:flex; justify-content:space-between; align-items:center; gap:10px;
  padding:12px var(--space); border-bottom:1px solid var(--line);
  background:rgba(6,10,20,.65); backdrop-filter:saturate(140%) blur(8px);
}
html.scrolling .site-header{        /* reduce blur cost while scrolling */
  backdrop-filter:none;
  background:rgba(6,10,20,.80);
}

.brand{font-weight:600;letter-spacing:.02em}
.chip{border:1px solid var(--line);border-radius:999px;padding:8px 12px;background:var(--panel);color:var(--ink)}
.nav{display:flex;gap:18px}
.nav a{padding:8px 10px;border:1px solid transparent;border-radius:999px;transition:transform .2s ease}
.nav a:hover,.nav a:focus-visible{border-color:var(--line);background:var(--panel);transform:translateY(-1px)}
@media (max-width:900px){
  #menu-btn{display:inline-block}
  .nav{
    position:fixed; inset:64px var(--space) auto var(--space);
    display:grid; gap:8px; background:var(--panel); border:1px solid var(--line); border-radius:12px;
    box-shadow:var(--shadow); padding:12px; transform:scale(.98); opacity:0; pointer-events:none; transition:.2s
  }
  .nav.open{transform:none;opacity:1;pointer-events:auto}
}

/* Hero */
.hero{
  min-height:72svh; padding:clamp(48px,7vw,96px) var(--space); display:grid; align-content:center; gap:16px; position:relative; isolation:isolate;
}
.hero::before{
  content:""; position:absolute; inset:-20%; z-index:-1; filter:blur(60px) saturate(120%);
  background:
    radial-gradient(50% 50% at 20% 20%, rgba(241,222,170,.25), transparent 60%),
    radial-gradient(40% 40% at 80% 30%, rgba(255,255,255,.12), transparent 60%),
    radial-gradient(35% 35% at 60% 80%, rgba(241,222,170,.18), transparent 60%);
  animation: aurora 18s linear infinite alternate; opacity:.9;
}
@keyframes aurora{0%{transform:translate3d(-3%,-2%,0) scale(1)}100%{transform:translate3d(3%,2%,0) scale(1.04)}}
.title{line-height:.9;letter-spacing:-.015em;font-size:clamp(48px,14vw,160px);font-weight:400}
.lead{max-width:62ch;color:var(--muted)}
.cta{display:flex;gap:12px;align-items:center}

/* Split chars */
.title .char{
  display:inline-block; transform:translateY(.8em) rotate(6deg); opacity:0;
  animation:rise .8s cubic-bezier(.2,.6,.2,1) forwards; animation-delay: calc(var(--i) * 22ms); will-change: transform,opacity;
}
@keyframes rise{to{transform:none;opacity:1}}

/* Sections */
.section{padding:64px var(--space)}
.section.alt{background:rgba(10,14,26,.35)}
.section-header{display:flex;flex-wrap:wrap;align-items:baseline;justify-content:space-between;gap:10px;margin-bottom:16px}
.section-header h2{margin:0;position:relative;display:inline-block}
.section-header h2::after{
  content:""; position:absolute; left:0; right:0; bottom:-6px; height:2px;
  background:linear-gradient(90deg,#fff,var(--accent)); transform-origin:left; transform:scaleX(0);
  transition:transform .6s cubic-bezier(.2,.6,.2,1);
}
.section-header h2.in::after{transform:scaleX(1)}
.grid{display:grid;gap:clamp(12px,1.8vw,18px)}
.grid-3{grid-template-columns:repeat(3,minmax(0,1fr))}
@media (max-width:900px){.grid-3{grid-template-columns:repeat(2,minmax(0,1fr))}}
@media (max-width:640px){.grid-3{grid-template-columns:1fr}}

.card{
  background:var(--panel); border:1px solid var(--line); border-radius:var(--radius);
  padding:16px; box-shadow:var(--shadow);
}
.figure{background:var(--panel);border:1px solid var(--line);border-radius:12px;overflow:hidden;position:relative}
.placeholder{aspect-ratio:16/10;background:
  radial-gradient(120% 60% at 0% 0%, rgba(241,222,170,.15), transparent 60%),
  linear-gradient(180deg, #0b1222, #0a0f1f);
  border-bottom:1px solid var(--line);
}
.figure figcaption{padding:10px 12px;color:var(--muted)}

/* Reveal */
.reveal-wipe::before{content:"";position:absolute;inset:0;background:#0b0b0c;transform-origin:left;transform:scaleX(1);transition:transform .8s cubic-bezier(.2,.6,.2,1)}
.reveal-wipe.in::before{transform:scaleX(0)}
[data-reveal]{opacity:0;transform:translateY(12px);transition:opacity .6s, transform .6s}
[data-reveal].in{opacity:1;transform:none}

/* Forms & buttons */
.list{display:grid;gap:8px;padding-left:18px}
.list li{margin-left:8px}
.form{display:grid;gap:12px;max-width:560px}
.form label{display:grid;gap:6px}
input,textarea{
  width:100%;color:var(--ink);background:rgba(14,20,34,.6);border:1px solid var(--line);border-radius:10px;padding:10px 12px;outline:none;
}
input:focus,textarea:focus{border-color:#34456a;box-shadow:0 0 0 3px rgba(52,69,106,.25)}
.btn{
  display:inline-block;background:linear-gradient(180deg,#f6e9bf,#e8d79d);color:#1a2133;font-weight:600;padding:10px 14px;border-radius:999px;border:0;cursor:pointer;box-shadow:0 8px 18px rgba(0,0,0,.35)
}
.btn:hover{transform:translateY(-1px)}

/* Footer & horizon */
.footer{padding:40px var(--space);border-top:1px solid var(--line);display:flex;justify-content:space-between;flex-wrap:wrap;gap:12px;color:var(--muted)}
.horizon{position:fixed;left:0;right:0;bottom:0;width:100%;height:18svh;z-index:-1;opacity:.9}

/* Reduced motion */
@media (prefers-reduced-motion: reduce){
  .title .char{animation:none;transform:none;opacity:1}
  .hero::before{animation:none}
  .nav a{transition:none}
  .reveal-wipe::before{transition:none;transform:none}
  [data-reveal]{transition:none;opacity:1;transform:none}
}

/* 1) Translucent glass card (keeps the background visible, but text readable) */
.glass {
  background: rgba(8, 12, 20, 0.45);
  border: 1px solid rgba(255,255,255,0.08);
  backdrop-filter: blur(8px) saturate(1.1);
  -webkit-backdrop-filter: blur(8px) saturate(1.1);
  border-radius: 12px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.25);
}

/* Fallback if backdrop-filter isn’t supported */
@supports not ((backdrop-filter: blur(1px)) or (-webkit-backdrop-filter: blur(1px))) {
  .glass { background: rgba(8, 12, 20, 0.78); }
}

/* 2) Outline/glow around headings for readability without a box */
.text-outline {
  /* stroke for WebKit */
  -webkit-text-stroke: 0.6px rgba(0,0,0,0.55);
  /* soft halo for all browsers */
  text-shadow:
    0 0 6px rgba(0,0,0,0.65),
    0 2px 12px rgba(0,0,0,0.45);
}

/* 3) Mobile typography & layout tweaks */
@media (max-width: 768px) {
  :root {
    --body-size: 16.5px;
    --line: 1.6;
  }
  body { font-size: var(--body-size); line-height: var(--line); }
  .grid { display: grid; grid-template-columns: 1fr; gap: 1rem; }
  .section { padding: 1.25rem; }
  .card { padding: 1rem; border-radius: 12px; }
  img, video, canvas { max-width: 100%; height: auto; }
}

/* Optional: add a subtle dark edge behind ALL running text without boxes */
.readable {
  text-shadow:
    0 0 3px rgba(0,0,0,0.55),
    0 0 12px rgba(0,0,0,0.35);
}

/* two-up image grid */
.grid-2 {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: clamp(12px, 2vw, 20px);
  align-items: start;
}
@media (max-width: 720px) {
  .grid-2 { grid-template-columns: 1fr; }
}

.figure {
  margin: 0;
}
.figure img {
  width: 100%;
  height: auto;
  display: block;
  border-radius: 10px;
}
.figure figcaption {
  margin-top: 8px;
  font-size: 0.95rem;
  color: var(--muted, #9aa3b2);
}


/* base tabs (if not already added) */
.pe-tabs{display:grid;gap:12px;justify-items:center;margin-top:10px}
.pe-tabs input[type="radio"]{
  position:absolute;inline-size:1px;block-size:1px;overflow:hidden;
  clip:rect(0 0 0 0);clip-path:inset(50%);white-space:nowrap;
}
.pe-tabbar{display:flex;gap:8px;flex-wrap:wrap;justify-content:center}
.pe-tabbar label{
  padding:6px 10px;font-size:14px;cursor:pointer;user-select:none;
  border:1px solid var(--line);border-radius:999px;background:var(--panel);
  transition:transform .12s ease,border-color .12s ease;
}
.pe-tabbar label:hover{transform:translateY(-1px)}
#L1:checked  ~ .pe-tabbar label[for="L1"],
#L4:checked  ~ .pe-tabbar label[for="L4"],
#L8:checked  ~ .pe-tabbar label[for="L8"],
#L12:checked  ~ .pe-tabbar label[for="L12"],
#L16:checked ~ .pe-tabbar label[for="L16"],
#L24:checked ~ .pe-tabbar label[for="L24"]
{
  border-color:var(--accent);
  background:linear-gradient(180deg,#f6e9bf,#e8d79d);
  color:#1a2133;
}

/* three‑up panels */
.pe-panels{width:min(92vw,1460px)}
.pe-panels .panel{
  display:none;
  grid-template-columns:repeat(3,minmax(0,1fr));
  gap:clamp(10px,1.6vw,16px);
}
.pe-card{margin:0;background:var(--panel);border:1px solid var(--line);border-radius:12px;overflow:hidden;box-shadow:var(--shadow)}
.pe-card img{width:100%;height:auto;object-fit:contain;aspect-ratio:1}
.pe-card figcaption{padding:8px 10px;font-size:.92rem;color:var(--muted);text-align:center}

/* show the matching panel */
#L1:checked  ~ .pe-panels [data-l="L1"],
#L4:checked  ~ .pe-panels [data-l="L4"],
#L8:checked  ~ .pe-panels [data-l="L8"],
#L12:checked  ~ .pe-panels [data-l="L12"],
#L16:checked ~ .pe-panels [data-l="L16"],
#L24:checked ~ .pe-panels [data-l="L24"]{ display:grid }

/* responsive */
@media (max-width:900px){ .pe-panels .panel{ grid-template-columns:1fr 1fr } }
@media (max-width:620px){ .pe-panels .panel{ grid-template-columns:1fr } }

/* infinite conveyor */
.graph-belt{ overflow:hidden; }
.graph-belt .belt{
  display:flex;
  gap: clamp(12px, 1.8vw, 20px);
  width:max-content;
  animation: belt-scroll 28s linear infinite;
}
.graph-belt:hover .belt{ animation-play-state: paused; }
@keyframes belt-scroll{ from{ transform: translateX(0); } to{ transform: translateX(-20%); } }
.graph-belt img{
  width: clamp(120px, 16vw, 240px);
  border-radius:10px;
  box-shadow: 0 10px 26px rgba(0,0,0,.35);
}

/* make the belt span underneath the 3-up grid */
.pe-panels .panel .graph-belt{
  grid-column: 1 / -1;
  margin-top: clamp(8px, 1.2vw, 14px);
}
